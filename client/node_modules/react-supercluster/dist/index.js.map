{"version":3,"file":"index.js","sources":["../src/index.tsx"],"sourcesContent":["import * as React from 'react';\nimport { BBox, GeoJsonProperties } from 'geojson';\nimport Supercluster from 'supercluster';\n\nexport interface UseSuperclusterArgument<P, C> {\n  points: Array<Supercluster.PointFeature<P>>;\n  bounds?: BBox;\n  zoom?: number;\n  options?: Supercluster.Options<P, C>;\n}\n\nconst useSupercluster = <\n  P extends GeoJsonProperties = Supercluster.AnyProps,\n  C extends GeoJsonProperties = Supercluster.AnyProps\n>({\n  points,\n  bounds,\n  zoom,\n  options,\n}: UseSuperclusterArgument<P, C>) => {\n  const superclusterRef = React.useRef<Supercluster<P, C>>();\n  const [clusters, setClusters] = React.useState<\n    Array<Supercluster.ClusterFeature<C> | Supercluster.PointFeature<P>>\n  >([]);\n\n  React.useEffect(() => {\n    if (!superclusterRef.current) {\n      superclusterRef.current = new Supercluster(options);\n    }\n\n    superclusterRef.current.load(points);\n    if (bounds && zoom) {\n      setClusters(superclusterRef.current.getClusters(bounds, zoom));\n    }\n  }, [points]);\n\n  React.useEffect(() => {\n    if (superclusterRef.current && bounds && zoom) {\n      setClusters(superclusterRef.current.getClusters(bounds, zoom));\n    }\n  }, [bounds, zoom]);\n\n  return {\n    clusters,\n    supercluster: superclusterRef.current,\n  };\n};\n\nexport default useSupercluster;\n"],"names":["React.useRef","React.useEffect"],"mappings":";;;;;;;;;AAWA,IAAM,eAAe,GAAG,UAGtB,EAK8B;QAJ9B,kBAAM,EACN,kBAAM,EACN,cAAI,EACJ,oBAAO;IAEP,IAAM,eAAe,GAAGA,YAAY,EAAsB,CAAC;IACrD,IAAA,uBAED,EAFE,gBAAQ,EAAE,mBAEZ,CAAC;IAENC,eAAe,CAAC;QACd,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE;YAC5B,eAAe,CAAC,OAAO,GAAG,IAAI,YAAY,CAAC,OAAO,CAAC,CAAC;SACrD;QAED,eAAe,CAAC,OAAO,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;QACrC,IAAI,MAAM,IAAI,IAAI,EAAE;YAClB,WAAW,CAAC,eAAe,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;SAChE;KACF,EAAE,CAAC,MAAM,CAAC,CAAC,CAAC;IAEbA,eAAe,CAAC;QACd,IAAI,eAAe,CAAC,OAAO,IAAI,MAAM,IAAI,IAAI,EAAE;YAC7C,WAAW,CAAC,eAAe,CAAC,OAAO,CAAC,WAAW,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;SAChE;KACF,EAAE,CAAC,MAAM,EAAE,IAAI,CAAC,CAAC,CAAC;IAEnB,OAAO;QACL,QAAQ,UAAA;QACR,YAAY,EAAE,eAAe,CAAC,OAAO;KACtC,CAAC;CACH,CAAC;;;;"}